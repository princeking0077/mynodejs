const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/anat_intro-Bpl7oxhR.js","assets/ui-vendor-BsEQT-Z2.js","assets/react-vendor-C_REkoCI.js"])))=>i.map(i=>d[i]);
import{j as e,d as T,m as w,e as B,X as A,C as R,f as k,g as _,h as S,i as D,k as W,B as I,l as L,n as E}from"./ui-vendor-BsEQT-Z2.js";import{a as d,f as P,e as F,L as z}from"./react-vendor-C_REkoCI.js";import{L as N,S as $}from"./Layout-Dhw-bBh-.js";import{_ as O,a as Q}from"./index-D7URrzAz.js";import{c as H}from"./curriculum-B-IUBDdq.js";const C=Object.assign({"../animations/anat_intro.jsx":()=>O(()=>import("./anat_intro-Bpl7oxhR.js"),__vite__mapDeps([0,1,2]))}),U=({animationId:p,code:a})=>{const[c,t]=d.useState(null),[m,g]=d.useState(!1),y=d.useRef(null);return d.useEffect(()=>{if(a){t(null);return}p?(async()=>{const b=`../animations/${p}.jsx`;if(C[b])try{const o=await C[b]();t(()=>o.default),g(!1)}catch(o){console.error("Failed to load animation:",o),g(!0)}else g(!0)})():t(null)},[p,a]),d.useEffect(()=>{if(a&&y.current){const h=y.current.contentDocument;h.open(),a.trim().toLowerCase().startsWith("<!doctype")||a.trim().toLowerCase().startsWith("<html")?h.write(a):h.write(`
                <html>
                <head>
                    <style>
                        body { margin: 0; color: white; font-family: sans-serif; overflow: auto; background: transparent; }
                        /* Default scrollbar styling for dark theme compatibility */
                        ::-webkit-scrollbar { width: 8px; }
                        ::-webkit-scrollbar-track { background: #1e293b; }
                        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
                    </style>
                </head>
                <body>
                    ${a}
                </body>
                </html>
            `),h.close()}},[a]),a?e.jsx("div",{className:"glass-panel",style:{width:"100%",height:"80vh",overflow:"hidden",padding:0},children:e.jsx("iframe",{ref:y,title:"Animation Preview",style:{width:"100%",height:"100%",border:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups"})}):m?e.jsxs("div",{className:"glass-panel",style:{padding:"2rem",textAlign:"center",color:"#ef4444"},children:[e.jsx("h3",{children:"Animation Not Found"}),e.jsx("p",{children:"The requested animation module could not be loaded."})]}):c?e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"glass-panel",style:{display:"flex",justifyContent:"center",padding:"2rem"},children:e.jsx(T,{className:"animate-spin"})}),children:e.jsx("div",{className:"glass-panel",style:{padding:"2rem",minHeight:"400px",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(c,{})})}):e.jsx("div",{className:"glass-panel",style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"Select a topic to view animation."})},V=({topicTitle:p,questions:a})=>{const[c,t]=d.useState({}),[m,g]=d.useState(!1),[y,h]=d.useState(0);if(d.useEffect(()=>{t({}),g(!1),h(0)},[p]),!a||a.length===0)return e.jsxs("div",{className:"glass-panel",style:{padding:"3rem",textAlign:"center"},children:[e.jsx("h2",{children:"No Quiz Available"}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"There is no quiz added for this topic yet."})]});const b=(n,l)=>{m||t(v=>({...v,[n]:l}))},o=()=>{let n=0;a.forEach(l=>{Number(c[l.id])===Number(l.correct)&&(n+=1)}),h(n),g(!0)},j=()=>{t({}),g(!1),h(0)};return e.jsxs("div",{className:"glass-panel",style:{padding:"2rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsxs("h2",{className:"text-gradient",style:{fontSize:"1.8rem",margin:0},children:["Quiz: ",p]}),m&&e.jsxs("div",{style:{background:"rgba(34,197,94,0.2)",padding:"0.5rem 1rem",borderRadius:"1rem",color:"#22c55e",border:"1px solid #22c55e",fontWeight:"bold"},children:["Score: ",y," / ",a.length]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:a.map((n,l)=>e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},style:{background:"rgba(255,255,255,0.03)",padding:"1.5rem",borderRadius:"1rem",border:m?Number(c[n.id])===Number(n.correct)?"1px solid #22c55e":"1px solid #ef4444":"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem"},children:[l+1,". ",n.question]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:n.options.map((v,x)=>e.jsx("div",{onClick:()=>b(n.id,x),style:{padding:"1rem",borderRadius:"0.5rem",background:c[n.id]===x?"var(--primary)":"rgba(0,0,0,0.3)",color:c[n.id]===x?"black":"var(--text-main)",cursor:m?"default":"pointer",transition:"0.2s",fontWeight:c[n.id]===x?"bold":"normal",opacity:m&&x!==Number(n.correct)&&c[n.id]!==x?.5:1,border:m&&x===Number(n.correct)?"2px solid #22c55e":"none"},children:v},x))}),m&&Number(c[n.id])!==Number(n.correct)&&e.jsxs("div",{style:{marginTop:"1rem",color:"#ef4444",fontSize:"0.9rem"},children:["Correct Answer: ",n.options[n.correct]]})]},n.id))}),e.jsx("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"center"},children:m?e.jsx("button",{onClick:j,style:{padding:"1rem 3rem",borderRadius:"2rem",border:"1px solid var(--primary)",background:"transparent",color:"var(--primary)",fontWeight:"bold",fontSize:"1.1rem",cursor:"pointer"},children:"Take Quiz Again"}):e.jsx("button",{onClick:o,disabled:Object.keys(c).length!==a.length,style:{padding:"1rem 3rem",borderRadius:"2rem",border:"none",background:Object.keys(c).length===a.length?"var(--primary)":"var(--text-muted)",color:"black",fontWeight:"bold",fontSize:"1.1rem",cursor:"pointer",transition:"0.3s"},children:"Submit All Answers"})})]})},G=()=>{const{subjectSlug:p,topicSlug:a}=P(),c=F(),[t,m]=d.useState(null),[g,y]=d.useState([]),[h,b]=d.useState(!0),[o,j]=d.useState({show:!1,count:30,url:null}),l=(()=>{for(const r of H)for(const s of r.semesters){const u=f=>f.toLowerCase().replace(/â€“/g,"-").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),i=s.subjects.find(f=>u(f.title)===p||f.id===p);if(i)return{...i,yearId:r.id,yearTitle:r.title,semTitle:s.title}}return null})();d.useEffect(()=>{(async()=>{if(l){b(!0);try{const s=await Q.getContent(l.id);let u=[];if(Array.isArray(s)&&(u=s.map(i=>({id:i.id.toString(),title:i.title,slug:i.slug,youtubeId:i.youtube_id,animationCode:i.description,quiz:(()=>{try{return typeof i.quiz_data=="string"?JSON.parse(i.quiz_data):i.quiz_data||[]}catch{return[]}})(),notesUrl:i.file_url,faqs:(()=>{try{return typeof i.faqs=="string"?JSON.parse(i.faqs):i.faqs||[]}catch{return[]}})(),blogContent:i.blog_content,metaTitle:i.meta_title,metaDescription:i.meta_description,createdAt:i.created_at}))),y(u),a){const i=u.find(f=>f.slug===a);i&&m(i)}else u.length>0&&m(u[0])}catch(s){console.error(s)}b(!1)}})()},[l?.id]),d.useEffect(()=>{let r;if(o.show&&o.count>0)r=setInterval(()=>{j(s=>({...s,count:s.count-1}))},1e3);else if(o.show&&o.count===0)try{const s=document.createElement("a");s.href=o.url,s.setAttribute("download",""),s.target="_blank",document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(s){console.error("Auto-download failed",s)}return()=>clearInterval(r)},[o]);const v=r=>{j({show:!0,count:30,url:r})},x=r=>{m(r),r.slug&&p&&c(`/subject/${p}/${r.slug}`)};return l?e.jsxs(N,{children:[e.jsx($,{title:t?.metaTitle||t?.title||l.title,description:t?.metaDescription||`Learn ${l.title} - Notes, Animations, and Quizzes.`}),e.jsxs("main",{className:"container",style:{paddingBottom:"4rem"},children:[e.jsx(B,{children:o.show&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.8)",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center",backdropFilter:"blur(5px)"},children:e.jsxs(w.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"glass-panel",style:{padding:"2rem",maxWidth:"400px",width:"90%",textAlign:"center",border:"1px solid var(--primary)",boxShadow:"0 0 50px rgba(34, 211, 238, 0.2)"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{onClick:()=>j({...o,show:!1}),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer"},children:e.jsx(A,{})})}),o.count>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"1.5rem",color:"var(--primary)"},children:e.jsx(R,{size:48,className:"animate-pulse"})}),e.jsx("h3",{style:{fontSize:"1.5rem",margin:"0 0 1rem 0"},children:"Your download is preparing..."}),e.jsx("div",{style:{fontSize:"3rem",fontWeight:"bold",fontFamily:"monospace",marginBottom:"1rem"},children:o.count}),e.jsx("p",{style:{color:"var(--text-muted)"},children:"Please wait while we generate your secure link."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:"1.5rem",color:"#22c55e"},children:e.jsx(k,{size:48})}),e.jsx("h3",{style:{fontSize:"1.5rem",margin:"0 0 1rem 0"},children:"Download Ready!"}),e.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"1.5rem"},children:"If the download didn't start automatically, click below."}),e.jsx("a",{href:o.url,target:"_blank",rel:"noreferrer",className:"btn btn-primary",onClick:()=>j({...o,show:!1}),children:"Download Now"})]})]})})}),e.jsxs(z,{to:`/year/${l.yearId}`,style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",color:"var(--text-muted)",marginBottom:"2rem",marginTop:"2rem",textDecoration:"none",fontWeight:"500"},children:[e.jsx(_,{size:18})," Back to ",l.yearTitle]}),e.jsx("div",{className:"glass-panel",style:{padding:"2.5rem",marginBottom:"2.5rem",borderRadius:"var(--radius-lg)",display:"flex",flexDirection:"column",gap:"1rem",backgroundImage:"linear-gradient(to right, rgba(16, 185, 129, 0.05), transparent)"},children:e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"1rem"},children:e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[e.jsx("span",{style:{background:"rgba(255,255,255,0.1)",padding:"0.2rem 0.8rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"600"},children:"B.Pharm"}),e.jsx("span",{style:{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",padding:"0.2rem 0.8rem",borderRadius:"20px",fontSize:"0.8rem",fontWeight:"600"},children:l.type})]}),e.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"800",lineHeight:"1.2"},children:l.title}),e.jsx("p",{style:{color:"var(--text-muted)",marginTop:"0.5rem",fontSize:"1.1rem"},children:h?"Loading topics...":`${g.length} Topics Available`})]})})}),e.jsxs("div",{className:"subject-grid",children:[e.jsx("div",{className:"subject-sidebar",children:e.jsxs("div",{className:"glass-panel",style:{padding:"0",maxHeight:"80vh",overflow:"hidden",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{padding:"1.5rem",borderBottom:"1px solid rgba(255,255,255,0.05)",background:"rgba(0,0,0,0.2)"},children:e.jsxs("h3",{style:{fontSize:"1.1rem",display:"flex",alignItems:"center",gap:"0.5rem",margin:0},children:[e.jsx(S,{size:18})," Topics"]})}),e.jsx("div",{style:{overflowY:"auto",padding:"1rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:g.map((r,s)=>e.jsxs("div",{onClick:()=>{x(r),window.scrollTo({top:0,behavior:"smooth"})},style:{padding:"1rem",borderRadius:"var(--radius-sm)",background:t?.id===r.id?"var(--primary)":"transparent",color:t?.id===r.id?"black":"var(--text-muted)",cursor:"pointer",fontWeight:t?.id===r.id?"700":"500",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"space-between",border:t?.id===r.id?"none":"1px solid transparent",borderColor:t?.id===r.id?"none":"rgba(255,255,255,0.05)"},children:[e.jsx("span",{style:{color:t?.id===r.id?"black":"var(--text-main)",fontSize:"0.95rem"},children:r.title}),t?.id===r.id&&e.jsx(D,{size:16})]},r.id||s))})]})}),e.jsx("div",{style:{minWidth:0},children:t?e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},style:{display:"flex",flexDirection:"column",gap:"4rem"},children:[t.youtubeId&&e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{background:"#ef4444",padding:"8px",borderRadius:"8px",display:"flex"},children:e.jsx(W,{size:20,color:"white",fill:"white"})}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",margin:0},children:"Video Lecture"})]}),e.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,borderRadius:"1rem",overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)"},children:e.jsx("iframe",{src:`https://www.youtube.com/embed/${(()=>{const r=t.youtubeId||"";if(!r)return"";if(/^[a-zA-Z0-9_-]{11}$/.test(r))return r;try{const i=new URL(r.startsWith("http")?r:`https://${r}`);if(i.searchParams.has("v"))return i.searchParams.get("v");if(i.pathname.includes("/shorts/"))return i.pathname.split("/shorts/")[1].split("/")[0];if(i.hostname.includes("youtu.be"))return i.pathname.substring(1).split("/")[0];if(i.pathname.includes("/embed/"))return i.pathname.split("/embed/")[1].split("/")[0]}catch{}const s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,u=r.match(s);return u&&u[2].length===11?u[2]:r})()}`,title:t.title,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none"},allowFullScreen:!0})})]}),e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{background:"#3b82f6",padding:"8px",borderRadius:"8px",display:"flex"},children:e.jsx(I,{size:20,color:"white"})}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",margin:0},children:"Study Notes"})]}),e.jsxs("div",{className:"glass-panel",style:{padding:"2.5rem",lineHeight:"1.8",fontSize:"1.05rem",color:"var(--text-secondary)"},children:[t.blogContent&&e.jsx("div",{className:"rich-text-content",dangerouslySetInnerHTML:{__html:t.blogContent},style:{marginBottom:"2rem"}}),!t.blogContent&&!t.notesUrl&&e.jsx("p",{style:{fontStyle:"italic",color:"var(--text-muted)"},children:"No written notes available for this topic yet."}),t.notesUrl&&e.jsx("div",{style:{marginTop:"2rem",paddingTop:"2rem",borderTop:"1px solid rgba(255,255,255,0.1)"},children:e.jsxs("button",{onClick:()=>v(t.notesUrl),className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",width:"auto"},children:[e.jsx(k,{size:18})," Download PDF Version"]})})]})]}),t.animationCode&&e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{background:"#8b5cf6",padding:"8px",borderRadius:"8px",display:"flex"},children:e.jsx(S,{size:20,color:"white"})}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",margin:0},children:"Interactive Simulation"})]}),e.jsx("div",{style:{borderRadius:"1rem",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",background:"black"},children:e.jsx(U,{code:t.animationCode})})]}),t.faqs&&t.faqs.length>0&&e.jsxs("section",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{background:"#f59e0b",padding:"8px",borderRadius:"8px",display:"flex"},children:e.jsx(L,{size:20,color:"white"})}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",margin:0},children:"Common Questions"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:t.faqs.map((r,s)=>e.jsxs("div",{className:"glass-panel",style:{padding:"1.5rem"},children:[e.jsx("h3",{style:{fontSize:"1.1rem",marginBottom:"0.8rem",color:"white"},children:r.question}),e.jsx("p",{style:{color:"var(--text-muted)",margin:0},children:r.answer})]},s))})]}),t.quiz&&t.quiz.length>0&&e.jsxs("section",{style:{paddingBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.8rem",marginBottom:"1.5rem"},children:[e.jsx("div",{style:{background:"#10b981",padding:"8px",borderRadius:"8px",display:"flex"},children:e.jsx(E,{size:20,color:"white"})}),e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"700",margin:0},children:"Assessment Quiz"})]}),e.jsx(V,{topicTitle:t.title,questions:t.quiz})]})]},t.id):e.jsxs("div",{className:"glass-panel flex-center",style:{padding:"4rem",flexDirection:"column",color:"var(--text-muted)"},children:[e.jsx(S,{size:48,style:{opacity:.2,marginBottom:"1rem"}}),e.jsx("p",{children:"Select a topic to start learning"})]})})]}),e.jsx("style",{children:`
                    .subject-grid {
                        display: grid;
                        grid-template-columns: minmax(300px, 350px) 1fr;
                        gap: 2rem;
                        align-items: start;
                    }
                    .subject-sidebar > div {
                        position: sticky;
                        top: 100px;
                    }
                    @media (max-width: 1024px) {
                        .subject-grid { 
                            display: flex; 
                            flex-direction: column; 
                            gap: 1.5rem; 
                        }
                        .subject-sidebar > div {
                            position: relative;
                            top: 0;
                            max-height: 250px;
                        }
                        .subject-grid > div:first-child { 
                            order: 0;
                            width: 100%;
                        }
                        .subject-grid > div:last-child { 
                            order: 1;
                            width: 100%;
                        }
                    }
                    /* Rich Text Formatting */
                    .rich-text-content { overflow-wrap: break-word; word-wrap: break-word; }
                    .rich-text-content h1, .rich-text-content h2, .rich-text-content h3 { color: white; margin-top: 1.5rem; margin-bottom: 0.5rem; }
                    .rich-text-content ul, .rich-text-content ol { padding-left: 1.5rem; margin-bottom: 1rem; }
                    .rich-text-content p { margin-bottom: 1rem; }
                    .rich-text-content a { color: var(--primary); text-decoration: underline; }
                    
                    /* Image Responsiveness - Critical Fix */
                    .rich-text-content img {
                        max-width: 100%;
                        height: auto;
                        display: block;
                        margin: 1.5rem 0;
                        border-radius: var(--radius-sm);
                        border: 1px solid rgba(255,255,255,0.1);
                    }
                `})]})]}):e.jsx(N,{children:e.jsxs("div",{className:"container flex-center",style:{minHeight:"60vh",flexDirection:"column",gap:"1rem"},children:[e.jsx("h2",{children:"Subject Not Found"}),e.jsx(z,{to:"/year/1",className:"btn btn-primary",children:"Browse All Subjects"})]})})};export{G as default};
